(window.webpackJsonp=window.webpackJsonp||[]).push([[20,6,7,14],{377:function(e,t,r){"use strict";r.r(t);var o=r(26),n=(r(60),{props:{route:{type:Object,required:!0},showEditCompletedRouteModal:{type:Boolean,required:!0}},data:function(){return{serverError:null,isLoading:!1,requiredFieldErrorMessage:function(e){return"".concat(e," is required")}}},computed:{formIsValid:function(){return!!this.route.expected_revenue&&!!this.route.distance}},methods:{cancel:function(){this.$emit("hide")},updateRoute:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.$axios.$put("/api/v1/routes/completed/".concat(e.route.id),e.route,{headers:{"x-api-key":e.$config.apiKey}});case 4:t.sent,e.$emit("hide"),e.$emit("updateRoute",e.route),e.serverError=null,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Error updating route:",t.t0),e.serverError=t.t0.message||"Unexpected error occurred";case 14:return t.prev=14,e.isLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})))()}}}),d=r(71),component=Object(d.a)(n,(function(){var e=this,t=e._self._c;return t("b-modal",{scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n    Edit Completed Route\n  ")]},proxy:!0},{key:"modal-footer",fn:function(){return[t("b-button",{attrs:{variant:"secondary"},on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),t("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.isLoading||!e.formIsValid}},[e._v("Save changes")])]},proxy:!0}]),model:{value:e.showEditCompletedRouteModal,callback:function(t){e.showEditCompletedRouteModal=t},expression:"showEditCompletedRouteModal"}},[e._v(" "),t("p",[t("strong",[e._v("Route Id:")]),e._v(" "+e._s(e.route.id))]),e._v(" "),t("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.updateRoute.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Expected revenue in $*",state:!!e.route.expected_revenue&&null,"invalid-feedback":e.requiredFieldErrorMessage("Expected revenue")}},[t("b-form-input",{attrs:{type:"number",required:""},model:{value:e.route.expected_revenue,callback:function(t){e.$set(e.route,"expected_revenue",t)},expression:"route.expected_revenue"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Distance in km*",state:!!e.route.distance&&null,"invalid-feedback":e.requiredFieldErrorMessage("Distance")}},[t("b-form-input",{attrs:{type:"number",required:""},model:{value:e.route.distance,callback:function(t){e.$set(e.route,"distance",t)},expression:"route.distance"}})],1),e._v(" "),e.serverError?t("div",{staticClass:"alert alert-danger"},[e._v("\n      "+e._s(e.serverError)+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports},378:function(e,t,r){"use strict";r.r(t);r(5),r(4),r(2),r(6),r(3),r(7);var o=r(26),n=r(0);r(60),r(1),r(25);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={props:{route:{type:Object,required:!0},showEditCreateRouteModal:{type:Boolean,required:!0},creating:{type:Boolean,required:!1,default:!1}},data:function(){return{serverError:null,isLoading:!1}},computed:{localRoute:function(){return l({},this.route)},formIsValid:function(){return!!(this.localRoute.start_city&&this.localRoute.end_city&&this.localRoute.departure_date&&this.localRoute.completion_date&&this.localRoute.expected_revenue&&this.localRoute.distance&&this.localRoute.transport_type&&this.localRoute.status)}},methods:{cancel:function(){this.$emit("hide")},updateRoute:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,d,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,e.localRoute.departure_date&&(r=new Date(e.localRoute.departure_date),e.localRoute.departure_date=r.toString()),e.localRoute.completion_date&&(o=new Date(e.localRoute.completion_date),e.localRoute.completion_date=o.toString()),n=e.creating?"/api/v1/routes":"/api/v1/routes/".concat(e.localRoute.id),d=e.creating?"post":"put",t.next=8,e.$axios[d](n,e.localRoute,{headers:{"x-api-key":e.$config.apiKey}});case 8:c=t.sent,e.$emit("hide"),e.$emit("updateRoute",l(l({},c.data),e.localRoute)),e.serverError=null,t.next=19;break;case 14:t.prev=14,t.t0=t.catch(1),console.error("Error updating route:",t.t0),e.serverError=t.t0.message||"Unexpected error occurred",e.localRoute=l({},e.route);case 19:return t.prev=19,e.isLoading=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[1,14,19,22]])})))()},requiredFieldErrorMessage:function(e){return"".concat(e," is required")}}},v=r(71),component=Object(v.a)(c,(function(){var e=this,t=e._self._c;return t("b-modal",{scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n    "+e._s(e.route.id?"Edit Route":"Create New Route")+"\n  ")]},proxy:!0},{key:"modal-footer",fn:function(){return[t("b-button",{attrs:{variant:"secondary"},on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),t("b-button",{attrs:{variant:"primary",disabled:e.isLoading||!e.formIsValid},on:{click:e.updateRoute}},[e._v("Save\n      changes")])]},proxy:!0}]),model:{value:e.showEditCreateRouteModal,callback:function(t){e.showEditCreateRouteModal=t},expression:"showEditCreateRouteModal"}},[e._v(" "),t("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.updateRoute.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Start city*",state:!!e.route.start_city&&null,"invalid-feedback":e.requiredFieldErrorMessage("Start city")}},[t("b-form-input",{attrs:{required:""},model:{value:e.route.start_city,callback:function(t){e.$set(e.route,"start_city",t)},expression:"route.start_city"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"End city*",state:!!e.route.end_city&&null,"invalid-feedback":e.requiredFieldErrorMessage("End city")}},[t("b-form-input",{attrs:{required:""},model:{value:e.route.end_city,callback:function(t){e.$set(e.route,"end_city",t)},expression:"route.end_city"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Departure date*",state:!!e.route.departure_date&&null,"invalid-feedback":e.requiredFieldErrorMessage("Departure date")}},[t("b-form-datepicker",{attrs:{required:""},model:{value:e.route.departure_date,callback:function(t){e.$set(e.route,"departure_date",t)},expression:"route.departure_date"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Completion date*",state:!!e.route.completion_date&&null,"invalid-feedback":e.requiredFieldErrorMessage("Completion date")}},[t("b-form-datepicker",{attrs:{required:""},model:{value:e.route.completion_date,callback:function(t){e.$set(e.route,"completion_date",t)},expression:"route.completion_date"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Expected revenue in $*",state:!!e.route.expected_revenue&&null,"invalid-feedback":e.requiredFieldErrorMessage("Expected revenue")}},[t("b-form-input",{attrs:{type:"number",required:""},model:{value:e.route.expected_revenue,callback:function(t){e.$set(e.route,"expected_revenue",t)},expression:"route.expected_revenue"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Distance in km*",state:!!e.route.distance&&null,"invalid-feedback":e.requiredFieldErrorMessage("Distance")}},[t("b-form-input",{attrs:{type:"number",required:""},model:{value:e.route.distance,callback:function(t){e.$set(e.route,"distance",t)},expression:"route.distance"}})],1),e._v(" "),t("b-form-group",{attrs:{label:"Transport type*",state:!!e.route.transport_type&&null,"invalid-feedback":e.requiredFieldErrorMessage("Transport type")}},[t("b-form-select",{attrs:{options:["cargo","passenger"],required:"",disabled:"ongoing"===e.route.status},model:{value:e.route.transport_type,callback:function(t){e.$set(e.route,"transport_type",t)},expression:"route.transport_type"}}),e._v(" "),"ongoing"===e.route.status?t("span",[e._v("(Cannot be changed for ongoing route)")]):e._e()],1),e._v(" "),t("b-form-group",{attrs:{label:"Status*",state:!!e.route.status&&null,"invalid-feedback":e.requiredFieldErrorMessage("Status")}},[t("b-form-select",{attrs:{options:["ongoing","pending"],required:"",disabled:!e.route.plate_number},model:{value:e.route.status,callback:function(t){e.$set(e.route,"status",t)},expression:"route.status"}}),e._v(" "),e.route.plate_number?e._e():t("span",[e._v("(No assigned transport or transport type was\n        changed or new route)")])],1),e._v(" "),e.serverError?t("div",{staticClass:"alert alert-danger"},[e._v("\n      "+e._s(e.serverError)+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports},379:function(e,t,r){"use strict";r.r(t);var o=r(26),n=(r(2),r(1),r(60),r(376)),d=r(377),l=r(378),c={components:{GenericRoutesTable:n.default,EditCompletedRouteModal:d.default,EditOtherRouteModal:l.default},data:function(){return{completedRoutes:[],ongoingRoutes:[],pendingRoutes:[],route:{},completedRoutesServerError:null,ongoingRoutesServerError:null,pendingRoutesServerError:null,isCompletedRoutesLoading:!0,isOngoingRoutesLoading:!0,isPendingRoutesLoading:!0,showEditCompletedRouteModal:!1,showEditCreateRouteModal:!1,creating:!1}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/api/v1/routes/status/completed",{headers:{"x-api-key":e.$config.apiKey}});case 3:r=t.sent,e.completedRoutes=r.data,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error retrieving completed routes:",t.t0),e.completedRoutesServerError=t.t0.message;case 11:return t.prev=11,e.isCompletedRoutesLoading=!1,t.finish(11);case 14:return t.prev=14,t.next=17,e.$axios.$get("/api/v1/routes/status/ongoing",{headers:{"x-api-key":e.$config.apiKey}});case 17:o=t.sent,e.ongoingRoutes=o.data,t.next=25;break;case 21:t.prev=21,t.t1=t.catch(14),console.error("Error retrieving ongoing routes:",t.t1),e.ongoingRoutesServerError=t.t1.message;case 25:return t.prev=25,e.isOngoingRoutesLoading=!1,t.finish(25);case 28:return t.prev=28,t.next=31,e.$axios.$get("/api/v1/routes/status/pending",{headers:{"x-api-key":e.$config.apiKey}});case 31:n=t.sent,e.pendingRoutes=n.data,t.next=39;break;case 35:t.prev=35,t.t2=t.catch(28),console.error("Error retrieving pending routes:",t.t2),e.pendingRoutesServerError=t.t2.message;case 39:return t.prev=39,e.isPendingRoutesLoading=!1,t.finish(39);case 42:case"end":return t.stop()}}),t,null,[[0,7,11,14],[14,21,25,28],[28,35,39,42]])})))()},methods:{openEditCompletedRoute:function(e){this.route=e,this.showEditCompletedRouteModal=!0,this.showEditCreateRouteModal=!1},openEditOtherRoute:function(e){this.route=e,this.showEditCreateRouteModal=!0,this.showEditCompletedRouteModal=!1},closeEditCompletedRouteModal:function(){this.showEditCompletedRouteModal=!1,this.showEditCreateRouteModal=!1},openCreateRouteModal:function(){this.route=this.getEmptyRoute(),this.showEditCreateRouteModal=!0,this.creating=!0},closeEditCreateRouteModal:function(){this.showEditCreateRouteModal=!1,this.creating=!1},getEmptyRoute:function(){return{start_city:"",end_city:"",departure_date:"",completion_date:"",expected_revenue:"",distance:"",transport_type:"",status:"pending"}},updateAndMoveRouteToCorrectTable:function(e){switch(this.completedRoutes=this.completedRoutes.filter((function(t){return t.id!==e.id})),this.ongoingRoutes=this.ongoingRoutes.filter((function(t){return t.id!==e.id})),this.pendingRoutes=this.pendingRoutes.filter((function(t){return t.id!==e.id})),e.status){case"completed":this.completedRoutes.unshift(e);break;case"ongoing":this.ongoingRoutes.unshift(e);break;case"pending":this.pendingRoutes.unshift(e);break;default:console.error("Unknown route status:",e.status)}}}},v=r(71),component=Object(v.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("br"),e._v(" "),t("b-button",{attrs:{variant:"danger"},on:{click:e.openCreateRouteModal}},[e._v("Create Pending Route")]),e._v(" "),t("br"),e._v(" "),t("br"),e._v(" "),t("generic-routes-table",{attrs:{title:"Completed Routes Dashboard",routes:e.completedRoutes,serverError:e.completedRoutesServerError,isLoading:e.isCompletedRoutesLoading},on:{openEditRouteDashboardHandler:e.openEditCompletedRoute}}),e._v(" "),t("br"),e._v(" "),t("generic-routes-table",{attrs:{title:"Ongoing Routes Dashboard",routes:e.ongoingRoutes,serverError:e.ongoingRoutesServerError,isLoading:e.isOngoingRoutesLoading},on:{openEditRouteDashboardHandler:e.openEditOtherRoute,updateRoute:e.updateAndMoveRouteToCorrectTable}}),e._v(" "),t("br"),e._v(" "),t("generic-routes-table",{attrs:{title:"Pending Routes Dashboard",routes:e.pendingRoutes,serverError:e.pendingRoutesServerError,isLoading:e.isPendingRoutesLoading},on:{openEditRouteDashboardHandler:e.openEditOtherRoute}}),e._v(" "),t("br"),e._v(" "),t("edit-completed-route-modal",{attrs:{route:e.route,showEditCompletedRouteModal:e.showEditCompletedRouteModal},on:{updateRoute:e.updateAndMoveRouteToCorrectTable,hide:e.closeEditCompletedRouteModal}}),e._v(" "),t("edit-other-route-modal",{attrs:{route:e.route,showEditCreateRouteModal:e.showEditCreateRouteModal,creating:e.creating},on:{updateRoute:e.updateAndMoveRouteToCorrectTable,hide:e.closeEditCreateRouteModal}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{GenericRoutesTable:r(376).default})},400:function(e,t,r){"use strict";r.r(t);var o={components:{RoutesDashboard:r(379).default}},n=r(71),component=Object(n.a)(o,(function(){return(0,this._self._c)("RoutesDashboard")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{RoutesDashboard:r(379).default})}}]);