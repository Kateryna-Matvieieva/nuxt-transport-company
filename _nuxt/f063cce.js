(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{377:function(e,r,t){"use strict";t.r(r);var o=t(26),n=(t(60),{props:{route:{type:Object,required:!0},showEditCompletedRouteModal:{type:Boolean,required:!0}},data:function(){return{serverError:null,isLoading:!1,requiredFieldErrorMessage:function(e){return"".concat(e," is required")}}},computed:{formIsValid:function(){return!!this.route.expected_revenue&&!!this.route.distance}},methods:{cancel:function(){this.$emit("hide")},updateRoute:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.isLoading=!0,r.prev=1,r.next=4,e.$axios.$put("/api/v1/routes/completed/".concat(e.route.id),e.route,{headers:{"x-api-key":e.$config.apiKey}});case 4:r.sent,e.$emit("hide"),e.$emit("updateRoute",e.route),e.serverError=null,r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),console.error("Error updating route:",r.t0),e.serverError=r.t0.message||"Unexpected error occurred";case 14:return r.prev=14,e.isLoading=!1,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,10,14,17]])})))()}}}),d=t(71),component=Object(d.a)(n,(function(){var e=this,r=e._self._c;return r("b-modal",{scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n    Edit Completed Route\n  ")]},proxy:!0},{key:"modal-footer",fn:function(){return[r("b-button",{attrs:{variant:"secondary"},on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.isLoading||!e.formIsValid}},[e._v("Save changes")])]},proxy:!0}]),model:{value:e.showEditCompletedRouteModal,callback:function(r){e.showEditCompletedRouteModal=r},expression:"showEditCompletedRouteModal"}},[e._v(" "),r("p",[r("strong",[e._v("Route Id:")]),e._v(" "+e._s(e.route.id))]),e._v(" "),r("b-form",{on:{submit:function(r){return r.stopPropagation(),r.preventDefault(),e.updateRoute.apply(null,arguments)}}},[r("b-form-group",{attrs:{label:"Expected revenue in $*",state:!!e.route.expected_revenue&&null,"invalid-feedback":e.requiredFieldErrorMessage("Expected revenue")}},[r("b-form-input",{attrs:{type:"number",required:""},model:{value:e.route.expected_revenue,callback:function(r){e.$set(e.route,"expected_revenue",r)},expression:"route.expected_revenue"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Distance in km*",state:!!e.route.distance&&null,"invalid-feedback":e.requiredFieldErrorMessage("Distance")}},[r("b-form-input",{attrs:{type:"number",required:""},model:{value:e.route.distance,callback:function(r){e.$set(e.route,"distance",r)},expression:"route.distance"}})],1),e._v(" "),e.serverError?r("div",{staticClass:"alert alert-danger"},[e._v("\n      "+e._s(e.serverError)+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);